if (self.CavalryLogger) { CavalryLogger.start_js(["mfjSI"]); }

__d("MStorySpeedTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){h.log("logger:MStorySpeedLoggerConfig",this.$1,g.BASIC)};a.prototype.logVital=function(){h.log("logger:MStorySpeedLoggerConfig",this.$1,g.VITAL)};a.prototype.logImmediately=function(){h.log("logger:MStorySpeedLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDownlinkMegabits=function(a){this.$1.downlink_megabits=a;return this};a.prototype.setEffectiveConnectionType=function(a){this.$1.effective_connection_type=a;return this};a.prototype.setLoggerName=function(a){this.$1.logger_name=a;return this};a.prototype.setNumCores=function(a){this.$1.num_cores=a;return this};a.prototype.setPlaceholderVisibleDurationMs=function(a){this.$1.placeholder_visible_duration_ms=a;return this};a.prototype.setRamGb=function(a){this.$1.ram_gb=a;return this};a.prototype.setRttMs=function(a){this.$1.rtt_ms=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};b={downlink_megabits:!0,effective_connection_type:!0,logger_name:!0,num_cores:!0,placeholder_visible_duration_ms:!0,ram_gb:!0,rtt_ms:!0,vc:!0};e.exports=a}),null);
__d("MStorySpeedLogger",["MStorySpeedTypedLogger","PerfXSharedFields","Stratcom"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a={init:function(a){this._loggerName=a,this._spinnerUnloaded=!1,this._spinnerVisible=!1,this._spinnerStartTime=null,this._listeners=[i.listen("m:page:unload",null,this._pageUnload.bind(this)),i.listen("m:more_item_automatic:spinner_visible",null,this._onSpinnerVisible.bind(this)),i.listen("m:more_item_automatic:items_loaded",null,this._onItemsLoaded.bind(this))]},_cleanup:function(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove()},_pageUnload:function(){this._spinnerVisible&&(this._spinnerUnloaded=!0,this._logLoadingSpinnerTime(this._getTimeSpan())),this._cleanup()},_onSpinnerVisible:function(event){event.getData()===this._loggerName&&!this._spinnerVisible&&(this._spinnerVisible=!0,this._spinnerStartTime=Date.now())},_onItemsLoaded:function(event){event.getData()===this._loggerName&&!this._spinnerUnloaded&&(this._logLoadingSpinnerTime(this._getTimeSpan()),this._spinnerVisible=!1,this._spinnerStartTime=null,this._cleanup())},_getTimeSpan:function(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0},_logLoadingSpinnerTime:function(a){new g().setPlaceholderVisibleDurationMs(a).setLoggerName(this._loggerName).updateData(h.getCommonData()).log()}};e.exports=a}),null);