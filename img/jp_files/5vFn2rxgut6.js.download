if (self.CavalryLogger) { CavalryLogger.start_js(["nh59c"]); }

__d("MReactTypeaheadView",["React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,g.Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.Renderer;return g.createElement(a,{data:this.props.data,query:this.props.query,waiting:this.props.waiting,loaderMarkup:this.props.loaderMarkup,onTouchStart:this.props.onTouchStart,onClickItem:this.props.onClickItem,simpleSearch:this.props.simpleSearch,excludedEntries:this.props.excludedEntries,maxSuggestionCount:this.props.maxSuggestionCount})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MTouchableArea.react",["MJSEnvironment","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a=h.PropTypes;var k=g.IS_ANDROID&&g.OS_VERSION<4.1,l=3;b=h.createClass({displayName:"MTouchableArea",propTypes:{onTouchEnd:a.func,onTouchMove:a.func,onTouchStart:a.func},getInitialState:function(){return{touchStartX:0,touchStartY:0,isTouched:!1}},handleTouchEnd:function(event){this.setState(this.getInitialState()),this.props.onTouchEnd&&this.props.onTouchEnd(event)},handleTouchMove:function(event){var a=event.nativeEvent.touches[0].screenX-this.state.touchStartX,b=event.nativeEvent.touches[0].screenY-this.state.touchStartY;(a>l||b>l)&&this.setState(this.getInitialState());this.props.onTouchMove&&this.props.onTouchMove(event)},handleTouchStart:function(event){k?this.setState({isTouched:!0,touchStartX:event.nativeEvent.touches[0].screenX,touchStartY:event.nativeEvent.touches[0].screenY}):this.setState({isTouched:!0}),this.props.onTouchStart&&this.props.onTouchStart(event)},render:function(){var a=h.Children.only(this.props.children);return h.cloneElement(a,{className:j(a.props.className,this.state.isTouched?"touched":""),onTouchEnd:this.handleTouchEnd,onTouchMove:k?this.handleTouchMove:this.props.onTouchMove,onTouchStart:this.handleTouchStart})}});e.exports=b}),null);
__d("MTokenCollection.react",["React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;b=g.PropTypes;h=babelHelpers.inherits(a,g.Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props.renderer,b=this.props.collection.entries.map(function(b,c){var d=null;return g.createElement(a,{collectionKey:this.props.collectionKey,entry:b,index:c,key:b.id,label:b.display,onRemove:this.props.onRemove,testid:d,truncate:this.props.truncateTokens})},this);return g.createElement("span",{className:this.props.className,onClick:this.props.onClick,role:"presentation"},b)};function a(){"use strict";h.apply(this,arguments)}a.propTypes={className:b.string,collection:b.object.isRequired,collectionKey:b.string,onClick:b.func,onRemove:b.func,renderer:b.func.isRequired,tokenTestIDGenerator:b.func,truncateTokens:b.bool};e.exports=a}),null);
__d("MTokenRenderer.react",["React","cx","fbt","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k;b=g.PropTypes;c=babelHelpers.inherits(a,g.Component);k=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){a.stopPropagation(),a.preventDefault(),this.props.onRemove&&this.props.onRemove(this.props.entry)}.bind(this),b}a.prototype.render=function(){"use strict";if(this.props.onRemove)var a="_5snx"+(this.props.truncate?" _p9m":""),b=g.createElement("button",{"aria-label":i._("Remove"),className:a,"data-sigil":"touchable",onClick:this.$1},g.createElement("span",{className:"_1xe9"},"\xa0\xd7\xa0"));a="_1xea"+(this.props.truncate?" _p9n":"");a=g.createElement("span",{className:a},this.props.label);var c="_5snw"+(this.props.truncate?" _p9o":""),d=g.createElement("input",{type:"hidden",value:this.props.entry.id,name:(this.props.entry.receivedInBackground?"unconfirmed_":"")+this.props.collectionKey+"["+this.props.index+"]"});return g.createElement("span",babelHelpers["extends"]({},this.props,{className:j(this.props.className,c)}),a,b,d)};a.propTypes={collectionKey:b.string,entry:b.object,index:b.number,label:b.string.isRequired,onRemove:b.func,testid:b.string,truncate:b.bool};e.exports=a}),null);
__d("MReactTypeahead",["DOM","EventEmitter","MPageController","MReactTypeaheadView","MRecentSearchesUpdater","MSearchConst","MSearchTypeaheadLogger","MSearchTypeaheadPerfLoggerUtil","MTypeaheadNullstateSource","MTypeaheadOnDemandSource","MTypeaheadTouchSource","MTypeaheadTouchSourceWithSuggestions","Parent","React","ReactDOM","Stratcom","SubscriptionsHandler","TypeaheadCompositeSource","URI","Vector","csx","cx","killswitch"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){"use strict";__p&&__p();var D;b=t.PropTypes;var E=10;c=babelHelpers.inherits(a,t.Component);D=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=D.constructor).call.apply(a,[this].concat(d)),this.state={resultData:[],query:null,waiting:!1},this.$1=null,this.$3=null,this.listen=function(a,b){this.$3=this.$3||new h();return this.$3.addListener(a,b.bind(this))}.bind(this),this.$5=function(a,b){this.$3&&this.$3.emit.apply(this.$3,[a].concat(b))}.bind(this),this.waitForResults=function(){this.setState({waiting:!0})}.bind(this),this.showResults=function(a){this.props.setNullstateData!=null&&u.findDOMNode(this.refs.input).value===""&&(a=this.props.setNullstateData),this.props.hideSelected&&(a=this.$6(a)),a.forEach(function(a){a.uri=new y(a.uri).addQueryData("refid",l.refid);return a}),this.setState({resultData:a,waiting:!0},this.$7),this.$5("show",[a])}.bind(this),this.$6=function(a){var b=this.props.excludedEntries;return b?a.filter(function(a){return!b[a.id]}):a}.bind(this),this.$7=function(){this.state.query==null&&this.setState({waiting:!1})}.bind(this),this.complete=function(){this.setState({waiting:!1})}.bind(this),this.reset=function(){u.findDOMNode(this.refs.input).value="",this.query("",!0)}.bind(this),this.query=function(a,b){b=b||!1,(b||this.state.query!==a)&&(this.$5("update",[a]),this.$5("change",[a]),this.setState({query:a}))}.bind(this),this.inputChanged=function(){u.findDOMNode(this.refs.input).value===""&&this.query("")}.bind(this),this.onSearchFormSubmit=function(event){event.preventDefault();var a=u.findDOMNode(this.refs.input);a=a.value;this.$5("query",[this.state.resultData]);a=new y("/search/?query").addQueryData("query",a).toString();i.load(a)}.bind(this),this.setInputValue=function(a){a&&(u.findDOMNode(this.refs.input).value=a)}.bind(this),this.onKeyUp=function(event){var a=this.getInputValue();this.query(a);this.props.onKeyUp&&this.props.onKeyUp(event)}.bind(this),this.onInput=function(event){C("SC_INDIA_KAIOS_APP_FIX_TOKENIZER")||this.onKeyUp(event)}.bind(this),this.onClearButtonEvent=function(event){event.preventDefault(),this.reset(),this.focusInput()}.bind(this),this.getInputValue=function(){return u.findDOMNode(this.refs.input).value}.bind(this),this.getInputNode=function(){return u.findDOMNode(this.refs.input)}.bind(this),this.getValue=function(){return this.getInputValue()}.bind(this),this.focusInput=function(){u.findDOMNode(this.refs.input).focus()}.bind(this),this.blurInput=function(){u.findDOMNode(this.refs.input).blur()}.bind(this),this.$9=function(event,a,b){this.reset(),this.props.onClickItem&&this.props.onClickItem(event,a,b),this.props.showSelectedInput&&a.name&&this.setInputValue(a.name),this.$5("select",[s.bySelector(event.target,"._5fna")]),this.$5("result-selected",[a]),this.forceUpdate()}.bind(this),this.getDisplayedHeight=function(){var a=u.findDOMNode(this.refs.results),b=z.getPos(a).y;return z.getDim(a).y+b}.bind(this),this.getDatasource=function(){return this.$1}.bind(this),this.$10=function(a){this.$1&&this.$1.unbindFromTypeahead(this);this.$2&&(this.$2.release(),delete this.$2);this.$1=a;if(!this.$1)return;this.$2=new w();this.$2.addSubscriptions(a.listen("waiting",this.waitForResults),a.listen("resultsready",this.showResults),a.listen("complete",this.complete));a.bindToTypeahead(this)}.bind(this),this.configureDatasource=function(a){__p&&__p();if(this.$1)return;var b=this.props.typeaheadConfig.sources,c=[],d=new y(b.bootstrapped.src);if(this.props.includeFamilyTags){var e=d.getQueryData();e.filter.push("family_tags");d.setQueryData(e)}e=this.getTypeaheadTouchSource(d.toString(),b.bootstrapped.source_key,this.props.suggestions);e.setShowSecondaryAction(!0);e.clientRendered=!0;this.touchSource=e;c.push(e);b.nullstate&&(this.nullstateDataSource=this.getTypeaheadNullstateSource(b.nullstate.src),this.nullstateDataSource.setMaximumResultCount(b.nullstate.max_results),this.nullstateDataSource.setShowSecondaryAction(!0),this.nullstateDataSource.clientRendered=!0,c.push(this.nullstateDataSource));e=this.getTypeaheadOnDemandSource(b.online.src);e.setMaximumResultCount(b.online.max_results);e.setEnableImmediateReturnOfCachedResults(b.online.enable_caching);a&&(a.enableQueryThrottle&&e.setThrottleSendRequest(a.queryThrottleTime),e.setMaxResults(a.maxResults),e.setEnableEagerSendRequest(a.enableEagerSendRequest),e.setQueryDelay(a.queryWaitTime));e.setShowSecondaryAction(!0);e.clientRendered=!0;c.push(e);if(this.props.setAllSourceMaxCount)for(var d=0;d<c.length;d++){b=c[d];b.setMaximumResultCount(this.props.maxSuggestionCount)}var f=this.getTypeaheadCompositeSource(c);this.props.typeaheadConfig.excludeids&&this.props.typeaheadConfig.excludeids.forEach(function(a){f.addExcludeID(a)});f.clientRendered=!0;f.mergeKey="id";this.$10(f);this.$5("start")}.bind(this),this.configureMSideNavMarauderLogger=function(){if(!this.props.typeaheadConfig.mSideNavMarauderLogger||this.$12)return;this.props.typeaheadConfig.mSideNavMarauderLogger.setupTypeaheadListener(this);this.$12=!0}.bind(this),this.configureMRecentSearchesUpdater=function(){if(this.props.typeaheadConfig.hasRecentSearches){var a=new k(this);this.$11().addSubscriptions({remove:a.destroy})}}.bind(this),this.configureMSearchTypeaheadLogger=function(){if(this.$13)return;this.$11().addSubscriptions(v.listen("m-typeahead-logger:new-session-id",null,this.addSessionIDToSearch));var a="/search/metrics.php",b=new m(this,a);this.$13=!0;this.$11().addSubscriptions(v.listen("log-m-search-session-end",null,function(a){b.blur(a.getData().reason)}))}.bind(this),this.configureMSearchTypeaheadPerfLogger=function(){if(!this.props.typeaheadConfig.typeaheadScubaInfo||this.$14)return;var a=n.getNewMSearchTypeaheadPerfLogger(this,this.props.typeaheadConfig.typeaheadScubaInfo,this.props.typeaheadConfig.sources.online.enable_caching);this.$11().addSubscriptions({remove:a.destroy});this.$14=!0}.bind(this),this.addSessionIDToSearch=function(a){if(!this.refs||!this.refs.searchForm)return;var b=u.findDOMNode(this.refs.searchForm),c=g.scry(b,"input","search-typeahead-session-id")[0];c||(c=document.createElement("input"),c.type="hidden",c.name="tsid",b.appendChild(c),v.addSigil(c,"search-typeahead-session-id"));c.value=a.getData().sessionID}.bind(this),this.getTypeaheadCompositeSource=function(a){return this.props.getTypeaheadCompositeSource?this.props.getTypeaheadCompositeSource(a):new x(a)}.bind(this),this.getTypeaheadOnDemandSource=function(a){return this.props.getTypeaheadOnDemandSource?this.props.getTypeaheadOnDemandSource(a):new p(a)}.bind(this),this.getTypeaheadTouchSource=function(a,b,c){if(this.props.getTypeaheadTouchSource)return this.props.getTypeaheadTouchSource(a,b);if(c){c=new r(a,b,c);this.props.maxSuggestionCount?c.setMaximumResultCount(this.props.maxSuggestionCount):c.setMaximumResultCount(E);return c}return new q(a,b)}.bind(this),this.getTypeaheadNullstateSource=function(a){return this.props.getTypeaheadNullstateSource?this.props.getTypeaheadNullstateSource(a):new o(a)}.bind(this),this.getTypeaheadType=function(){var a="m_side_nav";this.props.simpleSearch?a+="_simple":a+="_gsv2";return a}.bind(this),this.updateSuggestionsIds=function(a){this.touchSource&&this.touchSource.setSuggestionsIds(a),u.findDOMNode(this.refs.input).value===""&&this.reset()}.bind(this),this.$8=function(){this.props.onFocus&&this.props.onFocus(),this.query(this.getInputValue())}.bind(this),b}a.prototype.shouldComponentUpdate=function(a,b){__p&&__p();if(this.state.resultData!==b.resultData||this.state.waiting!==b.waiting)return!0;b=a.excludedEntries;var c=this.props.excludedEntries;for(var d in b)if(b[d]!==c[d])return!0;for(var e in c)if(c[e]!==b[e])return!0;return this.props.configureDataSourceOnNewProps&&this.props.maxSuggestionCount!==a.maxSuggestionCount?!0:!1};a.prototype.componentDidMount=function(){this.refs.input.type="search",this.props.configureDataSourceOnNewProps&&this.configureDatasource(),this.props.focusOnMount&&this.focusInput(),this.props.initialInputValue&&this.setInputValue(this.props.initialInputValue)};a.prototype.UNSAFE_componentWillUpdate=function(){this.$5("render_start")};a.prototype.componentDidUpdate=function(a,b){this.props.onUpdate&&this.props.onUpdate(),this.props.configureDataSourceOnNewProps&&this.props.maxSuggestionCount!==a.maxSuggestionCount&&(this.setDatasource(null),this.configureDatasource(),this.query(this.state.query,!0)),this.$5("rendered")};a.prototype.render=function(){var a=this.props.showClearButton&&this.state.query,b=this.props.typeaheadRootClassName||"_5fn4",c=t.createElement("input",{type:"search",ref:"input",className:"input",autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",name:"query",placeholder:this.props.placeholder,onBlur:this.props.onBlur,onKeyUp:this.onKeyUp,onKeyDown:this.props.onKeyDown,onFocus:this.$8,onChange:this.inputChanged,onInput:this.onInput});this.props.typeaheadConfig.submitOnEnter&&(c=t.createElement("form",{ref:"searchForm",action:"/search",className:"_4e7a",onSubmit:this.onSearchFormSubmit},c,t.createElement("input",{type:"hidden",name:"source",value:"typeahead"})));var d="_5fn6 touchable";this.props.useStandardClearButton&&(d="_5fn6 touchable mClearButton");var e=this.props.hideSelected?this.$6(this.state.resultData):this.state.resultData;return t.createElement("div",{className:this.props.className},t.createElement("div",{className:b},t.createElement("div",{className:"_5fn5"},c,t.createElement("div",{className:d,"data-sigil":"touchable",style:{display:a?"":"none"},onMouseDown:this.onClearButtonEvent,onTouchStart:this.onClearButtonEvent},t.createElement("div",null,"\xd7")))),t.createElement(j,{ref:"results",Renderer:this.props.presenter.ViewRenderer,data:e,excludedEntries:this.props.excludedEntries,query:this.state.query,waiting:this.state.waiting,loaderMarkup:this.props.typeaheadConfig.loaderMarkup,onTouchStart:this.props.onTouchStart,simpleSearch:this.props.simpleSearch,onClickItem:this.$9,maxSuggestionCount:this.props.maxSuggestionCount}))};a.prototype.$11=function(){this.$4||(this.$4=new w());return this.$4};a.prototype.cleanup=function(){this.$10(null),this.$4&&this.$4.release()};a.prototype.componentWillUnmount=function(){this.cleanup()};a.propTypes={onClickItem:b.func,onBlur:b.func,onKeyUp:b.func,onKeyDown:b.func,onTouchStart:b.func,placeholder:b.string,presenter:b.object.isRequired,showClearButton:b.bool,typeaheadConfig:b.object.isRequired,excludedEntries:b.object,getTypeaheadOnDemandSource:b.func,getTypeaheadTouchSource:b.func,getTypeaheadCompositeSource:b.func,getTypeaheadNullstateSource:b.func,onFocus:b.func,simpleSearch:b.bool,suggestions:b.array,hideSelected:b.bool,maxSuggestionCount:b.number,configureDataSourceOnNewProps:b.bool,setAllSourceMaxCount:b.bool,setNullstateData:b.array,focusOnMount:b.bool,initialInputValue:b.string,showSelectedInput:b.bool};e.exports=a}),null);
__d("MTaggerResultsRow.react",["MXUIDiv.react","MXUILayout.react","MXUILayoutColumn.react","MXUILayoutFillColumn.react","React","cx"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m;b=k.PropTypes;c=babelHelpers.inherits(a,k.Component);m=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=m.constructor).call.apply(a,[this].concat(d)),this.state={checked:!1},this.$1=function(){return k.createElement("div",{className:"_5rmb",style:{backgroundImage:"url("+this.props.data.photo+")"}})}.bind(this),this.$2=function(){var a=this.props.data;a=a.subtext;return!a?null:k.createElement("span",{className:"_5rmc"},a)}.bind(this),this.$3=function(event){this.setState({checked:!this.state.checked}),this.props.onClickItem&&this.props.onClickItem(event,this.props.data,this.props.checked)}.bind(this),b}a.prototype.render=function(){var a=this.props.data,b=this.props.checked?"_5tbv":"";return k.createElement(g,{"aria-checked":this.state.checked,className:"_5rmd",onClick:this.$3,role:"checkbox"},k.createElement(h,null,k.createElement(i,{key:"profile_image"},this.$1()),k.createElement(j,{alignself:"center",className:"_5rme",key:"display_name"},k.createElement("div",null,k.createElement("div",{className:"_5rmf"},a.display||a.name),this.$2())),k.createElement(i,{key:"check_mark"},k.createElement("div",{className:"_5tbx"},k.createElement("div",{className:b})))))};a.propTypes={data:b.object,onClickItem:b.func};e.exports=a}),null);
__d("MTaggerTypeaheadPresenter.react",["MTaggerResultsRow.react","React","cx","fbt"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;b=h.PropTypes;var l=30;k=babelHelpers.inherits(a,h.Component);k&&k.prototype;a.prototype.render=function(){var a=this.props.data.slice(0,l).map(function(a){var b=!1;this.props.excludedEntries&&(b=!!this.props.excludedEntries[a.id]);return h.createElement(g,{key:a.id,data:a,onClickItem:this.props.onClickItem,checked:b})},this);return h.createElement("div",{className:"_53na",onTouchStart:this.props.onTouchStart},h.createElement("div",{className:"_1zep"},j._("SUGGESTIONS")),a)};function a(){k.apply(this,arguments)}a.propTypes={query:b.string,data:b.array,onClickItem:b.func,onTouchStart:b.func,excludedEntries:b.object};c={ViewRenderer:a};e.exports=c}),null);
__d("TokenCollection",[],(function(a,b,c,d,e,f){__p&&__p();function g(){"use strict";this.entries=[]}g.prototype.addEntry=function(a){"use strict";this.hasEntry(a)||this.entries.push(a);return this};g.prototype.removeEntry=function(a){"use strict";__p&&__p();if(this.hasEntry(a)){var b=0;while(b<this.entries.length){if(this.entries[b].id===a.id)break;b++}this.entries.splice(b,1)}return this};g.prototype.hasEntry=function(a){"use strict";var b=a.id;return this.entries.some(function(a){return a.id===b})};g.prototype.shallowClone=function(){"use strict";var a=new g();a.entries=this.entries.slice(0);return a};e.exports=g}),null);
__d("MTokenizer.react",["Keys","MLegacyDataStore","MReactTypeahead","MTaggerTypeaheadPresenter.react","MTokenCollection.react","MTokenRenderer.react","MViewport","React","ReactComponentRenderer","TokenCollection","Vector","cx","fbt","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){__p&&__p();var u;a=n.PropTypes;b=babelHelpers.inherits(v,n.Component);u=b&&b.prototype;function v(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=u.constructor).call.apply(a,[this].concat(d)),this.state={focus:!1},this.init=function(){this.initWithoutFocus(),this.refs.typeahead.focusInput()}.bind(this),this.initWithoutFocus=function(){this.refs.typeahead.configureDatasource(),this.forceUpdate(),this.refs.typeahead.reset()}.bind(this),this.cleanup=function(){this.refs.typeahead.cleanup()}.bind(this),this.updateTypeahead=function(){this.forceUpdate()}.bind(this),this.onRemoveFromCollection=function(a){this.$1.removeEntry(a),this.props.onRemove&&this.props.onRemove(a),this.forceUpdate()}.bind(this),this.$3=function(a){this.state.focus||(a.preventDefault(),this.refs.typeahead.focusInput(),this.setState({focus:!0}))}.bind(this),this.$7=function(){this.$2===null&&(this.$2=m.getScrollTop())}.bind(this),this.$8=function(){this.$2!==null&&m.scrollTo(0,this.$2),this.$2=null}.bind(this),this.$5=function(event){if(this.props.scrollToTypeahead){this.$7();var a=this.refs.typeahead.getInputNode();a=q.getPos(a).y;m.scrollTo(0,a)}event.nativeEvent.keyCode===g.BACKSPACE&&this.$9()}.bind(this),this.$4=function(){this.props.scrollToTypeahead&&this.$8(),this.props.onInputBlur&&this.props.onInputBlur(),this.state.focus&&this.setState({focus:!1})}.bind(this),this.$6=function(event,a,b){b?this.onRemoveFromCollection(a):(this.$1.addEntry(a),this.props.onAdd&&this.props.onAdd(a)),this.props.hideSelected&&setTimeout(function(){this.refs.typeahead.focusInput()}.bind(this),0),event.stopPropagation(),this.forceUpdate()}.bind(this),this.getEntries=function(){return this.$1.entries}.bind(this),this.setEntries=function(a){this.$1.entries=a}.bind(this),this.$9=function(){var a=this.getEntries();a&&a.length&&!this.refs.typeahead.getInputValue()&&this.$1.removeEntry(a[a.length-1]);this.forceUpdate()}.bind(this),this.updateSuggestionsIds=function(a){this.init(),this.updateTypeaheadWithSuggestions(a)}.bind(this),this.updateTypeaheadWithSuggestions=function(a){this.refs.typeahead.updateSuggestionsIds(a)}.bind(this),this.focusAndUpdateSuggestionsIDs=function(a){this.refs.typeahead.updateSuggestionsIds(a),this.refs.typeahead.focusInput()}.bind(this),b}v.prototype.UNSAFE_componentWillMount=function(){"use strict";this.$1=new p(),this.$2=null};v.prototype.componentWillUnmount=function(){"use strict";this.cleanup()};v.prototype.render=function(){"use strict";__p&&__p();var a=this.$1.entries||[],b={},c=a&&a.length>0;if(c)for(var d=0;d<a.length;++d)b[a[d].id]=!0;if(this.props.excludedEntries)for(var e in this.props.excludedEntries)b[e]=this.props.excludedEntries[e];a=!c||this.props.showPlaceholderWithEntries?this.props.placeholder:null;return n.createElement("div",babelHelpers["extends"]({},this.props,{className:t(this.props.className,"_5snt"),onClick:this.$3,role:"presentation"}),n.createElement(k,{ref:"collection",collection:this.$1,collectionKey:this.props.collectionKey,renderer:l,onRemove:this.onRemoveFromCollection}),n.createElement(i,{ref:"typeahead",className:"_5snu",typeaheadRootClassName:"_5snv",excludedEntries:b,placeholder:a,presenter:this.props.presenter,typeaheadConfig:this.props.typeaheadConfig,includeFamilyTags:this.props.includeFamilyTags,onBlur:this.$4,onKeyDown:this.$5,onClickItem:this.$6,suggestions:this.props.suggestions,hideSelected:this.props.hideSelected,maxSuggestionCount:this.props.maxSuggestionCount}))};v.propTypes={placeholder:a.string,placeholderWithEntries:a.bool,typeaheadConfig:a.object.isRequired,presenter:a.object.isRequired,excludedEntries:a.object,collectionKey:a.string,onInputBlur:a.func,includeFamilyTags:a.bool,hideSelected:a.bool,onAdd:a.func,onRemove:a.func,maxSuggestionCount:a.number,scrollToTypeahead:a.bool};v.init=function(a){var b=s._("Start typing a name..."),c=h.get(a.container);c.tokenizer=new o(v,a.container);c.tokenizer.setProps({placeholder:b,showPlaceholderWithEntries:!!a.showPlaceholderWithEntries,presenter:j,typeaheadConfig:a.typeaheadConfig,suggestions:a.suggestions,hideSelected:a.hideselected,collectionKey:a.collectionKey});c.tokenizer.component.init()};e.exports=v}),null);
__d("MCompositionAudioFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_POST:"audio_post"})}),null);
__d("MCompositionAudioStore",["MCompositionAudioFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){a=b("MCompositionConstants").ActionTypes;c=new h(i.AUDIO,g).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.AUDIO_CHANGE,j.thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionMinutiaeFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_TYPE_ID:"action_type",CUSTOM_ICON_ID:"custom_icon",FBT_PHRASE:"fbt_phrase",ICON:"icon_src",ICON_LEGACY:"icon",OBJECT_ID:"object",OBJECT_NAME:"object_str",SHOW_ATTACHMENT:"show_attachment",SUGGESTION_MECHANISM:"suggestion_mechanism",TRIGGERS_EVENT_TAG_EXPANSION:"triggers_event_tag_expansion",USE_DEFAULT_ICON:"use_default_icon"})}),null);
__d("MCompositionMinutiaeStore",["MCompositionMinutiaeFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){a=b("MCompositionConstants").ActionTypes;c=new h(i.MINUTIAE,g).setRequiredFields(g.ACTION_TYPE_ID,g.ICON,g.ICON_LEGACY,g.OBJECT_ID,g.OBJECT_NAME).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.MINUTIAE_REMOVE,j.thatReturnsNull).setHandlerFor(a.MINUTIAE_SET,j.thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionPhotoFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO_INFO_LIST:"photo_info_list"})}),null);
__d("MCompositionPhotoStore",["MCompositionPhotoFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){a=b("MCompositionConstants").ActionTypes;c=new h(i.PHOTO,g).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.PHOTO_CHANGE,j.thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionPlaceFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADDRESS:"address",FREEFORM_NAME:"FREEFORM_NAME",ID:"id",IS_CURRENT:"is_current",IS_EVENT:"isEventResult",IS_NEW:"new_place",IS_NON_SPECIFIC:"isNonSpecific",JSON_LOCATION:"JSON_LOCATION",LATITUDE:"latitude",LONGITUDE:"longitude",NAME:"name",PHONE:"phone",SUGGESTION_MECHANISM:"suggestion_mechanism",SUGGESTED_OG_ACTION_TYPE_ID:"og_action_type_id",TOPIC_TOKENS:"topic_tokens",WEBSITE:"website",ZIP:"zip"})}),null);
__d("MCompositionPlaceStore",["FBJSON","MCompositionConfigStore","MCompositionDispatcher","MCompositionPlaceFields","MCompositionStore","MCompositionStoreID","MPlaces","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a=b("MCompositionConstants").ActionTypes;c=new k(l.PLACE,j).setRequiredFields(j.NAME).setHandlerFor(a.COMPOSITION_INITIALIZE,function(a){i.waitFor([h.toUpdate()]);return a}).setHandlerFor(a.PLACE_REMOVE,n.thatReturnsNull).setHandlerFor(a.PLACE_SET,function(a){var b=a[j.LATITUDE],c=a[j.LONGITUDE];b&&c?a[j.JSON_LOCATION]=g.stringify({latitude:b,longitude:c}):a[j.JSON_LOCATION]=m.getCurrentJSONLocation();return a}).register();e.exports=c}),null);
__d("MCompositionStatusFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TEXT:"TEXT",LONGEST_LENGTH:"LONGEST_LENGTH"})}),null);
__d("MCompositionStatusStore",["MCompositionStatusFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){c=b("MCompositionConstants").ActionTypes;function a(a){a=a||{};Object.prototype.hasOwnProperty.call(a,g.TEXT)||(a[g.TEXT]="");a[g.LONGEST_LENGTH]=Math.max(k.get(g.LONGEST_LENGTH,0),a[g.TEXT].length);return a}var k=new h(i.STATUS,g).setRequiredFields(g.LONGEST_LENGTH,g.TEXT).setHandlerFor(c.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).setHandlerFor(c.STATUS_CHANGE,a).register();e.exports=k}),null);
__d("MCompositionWithFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOKENS:"TOKENS"})}),null);
__d("MCompositionWithStore",["MCompositionStore","MCompositionStoreID","MCompositionWithFields","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){a=b("MCompositionConstants").ActionTypes;c=new g(h.WITH_TAGS,i).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.WITH_CHANGE,j.thatReturnsArgument).register();e.exports=c}),null);
__d("MTaggableActivityPreviewTemplate",["invariant"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b}a.prototype.getTemplateArray=function(){"use strict";var a=0,b=this.$2.length,c,d=[];for(var e=0;e<=this.$2.length;e++)c=e!==b?this.$2[e].position:this.$1.length,d.push(this.$1.slice(a,c)),a=c;return d};a.prototype.getTokens=function(){"use strict";return this.$2};a.prototype.renderArray=function(a){"use strict";this.$2.length===a.length||g(0,4693,this.$2.length,a.length);var b=this.getTemplateArray().concat();for(var c=a.length;c>0;c--)b.splice(c,0,a[c-1]);return b};e.exports=a}),null);
__d("XTaggableActivityPreviewTemplateQueryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/intl/preview_template/",{action_type_id:{type:"Int",required:!0}})}),null);
__d("MTaggableActivityPreviewTemplateQuery",["Promise","ErrorUtils","MCache","MRequest","MTaggableActivityPreviewTemplate","MTaggableActivityPreviewTemplateConstants","XTaggableActivityPreviewTemplateQueryController","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=l.TOKEN_TYPES,p=12096e5,q="__created_at";function r(a){return h.applyWithGuard(a,null,null,null,"MTaggableActivityPreviewTemplate")}function a(a){"use strict";this.$1=a,this.$2={has_place_type:"",has_users_type:""}}a.prototype.$3=function(a){"use strict";a[q]=Date.now();r(function(){return i.setItem(this.getCacheKey(),a)}.bind(this));return this.$4(a)};a.prototype.$4=function(a){"use strict";a=a[this.$5()];a||n(0,2619,this.$5());return new k(a.string,a.tokens)};a.prototype.getCacheKey=function(){"use strict";return[l.CACHE_PREFIX,l.VERSION,this.$1,l.LOCALE,l.GENDER].join("_")};a.prototype.$6=function(){"use strict";__p&&__p();var a=this.getCacheKey(),b=r(function(){return i.getItem(a)});if(!b)return null;if(Date.now()-b[q]>p){r(function(){return i.removeItem(a)});return null}return this.$4(b)};a.prototype.$5=function(){"use strict";return l.KEY_PREFIX+"_"+Object.keys(this.$2).sort().map(function(a){return this.$2[a]}.bind(this)).join("_")};a.prototype.getURI=function(){"use strict";return m.getURIBuilder().setInt("action_type_id",this.$1).getURI()};a.prototype.fetch=function(){"use strict";var a=this.$6();return a?g.resolve(a):this.$7()};a.prototype.$7=function(){"use strict";return new g(function(a){var b=new j(this.getURI()).setMethod("GET");b.listen("done",function(b){a(this.$3(b.payload.templates))}.bind(this));b.send()}.bind(this))};a.prototype.setHasPeople=function(){"use strict";this.$2.has_users_type=o.PEOPLE.MULTIPLE;return this};a.prototype.setHasPerson=function(){"use strict";this.$2.has_users_type=o.PEOPLE.SINGLE;return this};a.prototype.setHasPlace=function(){"use strict";this.$2.has_place_type=o.PLACE.SPECIFIC;return this};e.exports=a}),null);
__d("MComposerEligibility",["MCompositionAudioFields","MCompositionAudioStore","MCompositionMinutiaeFields","MCompositionMinutiaeStore","MCompositionPhotoFields","MCompositionPhotoStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionShareFields","MCompositionShareStore","MCompositionStatusFields","MCompositionStatusStore","MCompositionWithFields","MCompositionWithStore","gkx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();a={isTextEligible:function(a){return a===null||a===""?!1:a.length<=150},isComposerEmpty:function(){__p&&__p();var a=l.get(k.PHOTO_INFO_LIST,null);a=a!==null&&a.length>0;var b=h.get(g.AUDIO_POST,null);b=b!==null;var c=r.get(q.TEXT,"");c=c.trim();c=c.replace(/\n{3,}/,"\n\n");c=c.replace(/\t+/," ");c=c!=="";var d=t.get(s.TOKENS);d=d!==null&&d.length>0;var e=n.get(m.ID)!==null,f=j.get(i.ACTION_TYPE_ID),u=j.get(i.OBJECT_ID);f=f!==null||u!==null;u=p.get(o.SHARE_URI)!==null;return!a&&!b&&!c&&!d&&!e&&!f&&!u?!0:!1},isStoryPostEligible:function(a){__p&&__p();var b=l.get(k.PHOTO_INFO_LIST,null),c=r.get(q.TEXT,"");c=c.trim();c=c.replace(/\n{3,}/,"\n\n");c=c.replace(/\t+/," ");var d=t.get(s.TOKENS),e=n.get(m.ID),f=j.get(i.ACTION_TYPE_ID),g=j.get(i.OBJECT_ID);d=d!==null&&d.length>0||e!==null||f!==null||g!==null;e=b!==null&&b.length>0&&(!d||d&&b[0].type==="photo");f=p.get(o.SHARE_URI)!==null;g=u("676786")&&f&&a&&!d;if(d&&c===""&&!e&&!f)return!1;return c!==""&&this.isTextEligible(c)&&!f||c===""&&e&&!f||c!==""&&this.isTextEligible(c)&&!e&&g||c===""&&!e&&g?!0:!1}};e.exports=a}),null);
__d("MStructuredComposerFriendsInputReact",["BanzaiODS","CSS","DOM","MComposerLogger","MComposerNavigationMixin","MComposerWaterfallEvent","MCompositionUserActions","MCompositionWithFields","MCompositionWithStore","MSubscriptionsHandlerMixin","MTokenCollection.react","MTokenRenderer.react","MUnifiedTaggerConstants","React","ReactDOM","Stratcom","TokenCollection","mixin","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){__p&&__p();var z,A="mtouch_composer_facerec_suggestions",B=s.SHOW_UNIFIED_TAGGER;b=babelHelpers.inherits(a,x(k,p));z=b&&b.prototype;function a(a,b,c){"use strict";__p&&__p();z.constructor.call(this),this.$MStructuredComposerFriendsInputReact1=a,this.$MStructuredComposerFriendsInputReact2=b,this.$MStructuredComposerFriendsInputReact3=new w(),this.$MStructuredComposerFriendsInputReact4=u.render(t.createElement(q,{onClick:this.$MStructuredComposerFriendsInputReact5.bind(this),onRemove:this.$MStructuredComposerFriendsInputReact6.bind(this),renderer:r,collection:this.$MStructuredComposerFriendsInputReact3,collectionKey:"users_with"}),i.find(b,"ul","friend-tokens")),this.$MStructuredComposerFriendsInputReact7=c,this.$MStructuredComposerFriendsInputReact8=c.style.display,this.$MStructuredComposerFriendsInputReact9={},B&&this.addSubscriptions(v.listen("MComposer:tagger:click",s.TOKEN_TYPES.PEOPLE,function(){return this.$MStructuredComposerFriendsInputReact5()}.bind(this))),this.addSubscriptions(v.listen("click","inline-with-button",function(){y(function(){this.$MStructuredComposerFriendsInputReact5()}.bind(this),10)}.bind(this)),v.listen("MComposer:tagger:open",null,function(){return this.$MStructuredComposerFriendsInputReact5()}.bind(this))),this.addSubscriptions(i.listen(this.$MStructuredComposerFriendsInputReact7,"click",null,function(){return this.$MStructuredComposerFriendsInputReact5()}.bind(this)),this.$MStructuredComposerFriendsInputReact1.listen("cancel",function(){this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerFriendsInputReact10()}.bind(this)).close()}.bind(this)),this.$MStructuredComposerFriendsInputReact1.listen("submit",function(event){this.currentNavigationPolicy().addOnClose(function(){var a={};a[n.TOKENS]=event.tokens;m.withUpdate(a);j.log(l.FRIEND_TAG_ADD,{num_tags:event.tokens.length});this.$MStructuredComposerFriendsInputReact11(event.tokens.length)}.bind(this)).close()}.bind(this)),o.addChangeListener(function(){return this.$MStructuredComposerFriendsInputReact12()}.bind(this)))}a.prototype.$MStructuredComposerFriendsInputReact12=function(){"use strict";var a=o.get(n.TOKENS,[]);a!==this.$MStructuredComposerFriendsInputReact3.entries&&(this.$MStructuredComposerFriendsInputReact3.entries=a,this.$MStructuredComposerFriendsInputReact13(),this.$MStructuredComposerFriendsInputReact4.forceUpdate(),this.$MStructuredComposerFriendsInputReact14(),this.$MStructuredComposerFriendsInputReact11(),this.$MStructuredComposerFriendsInputReact15())};a.prototype.$MStructuredComposerFriendsInputReact15=function(){"use strict";this.$MStructuredComposerFriendsInputReact16&&this.$MStructuredComposerFriendsInputReact16(this.$MStructuredComposerFriendsInputReact3.entries.slice())};a.prototype.$MStructuredComposerFriendsInputReact13=function(){"use strict";B&&v.invoke("MComposer:tagger:update",null,{people:this.$MStructuredComposerFriendsInputReact3.entries})};a.prototype.$MStructuredComposerFriendsInputReact17=function(a){"use strict";var b=!this.$MStructuredComposerFriendsInputReact3.hasEntry(a);b&&(this.$MStructuredComposerFriendsInputReact3.addEntry(a),this.$MStructuredComposerFriendsInputReact13(),this.$MStructuredComposerFriendsInputReact14(),this.$MStructuredComposerFriendsInputReact4.forceUpdate());return b};a.prototype.addManualXYTag=function(a){"use strict";this.$MStructuredComposerFriendsInputReact17(a)&&this.$MStructuredComposerFriendsInputReact18(),this.$MStructuredComposerFriendsInputReact15()};a.prototype.addAutoToken=function(a){"use strict";this.$MStructuredComposerFriendsInputReact9[a.id]||this.$MStructuredComposerFriendsInputReact17(a)&&(this.$MStructuredComposerFriendsInputReact19(),g.bumpEntityKey(A,"add_auto_tag"))};a.prototype.onRemove=function(a){"use strict";this.$MStructuredComposerFriendsInputReact3.removeEntry(a),this.$MStructuredComposerFriendsInputReact14(),this.$MStructuredComposerFriendsInputReact13(),this.$MStructuredComposerFriendsInputReact4.forceUpdate(),this.$MStructuredComposerFriendsInputReact15()};a.prototype.$MStructuredComposerFriendsInputReact6=function(a){"use strict";this.$MStructuredComposerFriendsInputReact9[a.id]=!0,this.onRemove(a),a.autoTag&&g.bumpEntityKey(A,"remove_auto_tag"),this.$MStructuredComposerFriendsInputReact20()};a.prototype.$MStructuredComposerFriendsInputReact14=function(){"use strict";var a=this.$MStructuredComposerFriendsInputReact3.entries.length>0;B||h.conditionShow(this.$MStructuredComposerFriendsInputReact2,a);h.conditionClass(this.$MStructuredComposerFriendsInputReact7,"active",a)};a.prototype.$MStructuredComposerFriendsInputReact5=function(){"use strict";this.newNavigationPolicy().addOnOpen(function(){j.log(l.FRIEND_TAG_INTENT),this.$MStructuredComposerFriendsInputReact1.setEntries(this.$MStructuredComposerFriendsInputReact3.entries.slice()),setTimeout(this.$MStructuredComposerFriendsInputReact1.show.bind(this.$MStructuredComposerFriendsInputReact1))}.bind(this)).addOnCloseByBrowser(function(){this.$MStructuredComposerFriendsInputReact1.hide(),this.$MStructuredComposerFriendsInputReact10()}.bind(this)).open()};a.prototype.$MStructuredComposerFriendsInputReact11=function(a){"use strict";v.invoke("MStructuredComposerFriendsInput-done",null,{num_tags:a})};a.prototype.$MStructuredComposerFriendsInputReact19=function(){"use strict";v.invoke("MStructuredComposerFriendsInput-addedAutoTags",null,{})};a.prototype.$MStructuredComposerFriendsInputReact18=function(){"use strict";v.invoke("MStructuredComposerFriendsInput-addedManualXYTags",null,{})};a.prototype.$MStructuredComposerFriendsInputReact20=function(){"use strict";v.invoke("MStructuredComposerFriendsInput-removedManualTags",null,{})};a.prototype.$MStructuredComposerFriendsInputReact10=function(){"use strict";var a=this.getTokenCount();v.invoke("MStructuredComposerFriendsInput-done",null,{cancel:!0,num_tags:a});j.log(l.FRIEND_TAG_CANCEL,{num_tags:a})};a.prototype.reset=function(){"use strict";this.$MStructuredComposerFriendsInputReact4.entries=[],B||i.hide(this.$MStructuredComposerFriendsInputReact2),this.$MStructuredComposerFriendsInputReact3.entries=[],this.$MStructuredComposerFriendsInputReact9={},this.$MStructuredComposerFriendsInputReact1.clear(),this.$MStructuredComposerFriendsInputReact4.forceUpdate(),h.conditionClass(this.$MStructuredComposerFriendsInputReact7,"active",!1),this.$MStructuredComposerFriendsInputReact1.hide()};a.prototype.getTokenCount=function(){"use strict";return this.$MStructuredComposerFriendsInputReact3.entries.length};a.prototype.hasTokens=function(){"use strict";return this.getTokenCount()>0};a.prototype.setVisible=function(a){"use strict";h.conditionShow(this.$MStructuredComposerFriendsInputReact7,a)};a.prototype.setOnEntriesChangedHandler=function(a){"use strict";this.$MStructuredComposerFriendsInputReact16=a};a.prototype.getEntries=function(){"use strict";return this.$MStructuredComposerFriendsInputReact3.entries};e.exports=a}),null);
__d("MStructuredComposerTaggingInputReact",["React"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i="xy_tags",j="unconfirmed_xy_tags",k="failed_suggestions";b=babelHelpers.inherits(a,g.Component);h=b&&b.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a,b,c,d,e){e=e+"["+d+"]";return g.createElement("div",{key:"tag"+a.fbid},g.createElement("input",{type:"hidden",name:e+"[x]",value:a.x}),g.createElement("input",{type:"hidden",name:e+"[y]",value:a.y}),g.createElement("input",{type:"hidden",name:e+"[fbid]",value:a.photoID}),g.createElement("input",{type:"hidden",name:e+"[name]",value:c}),g.createElement("input",{type:"hidden",name:e+"[subject]",value:b}),g.createElement("input",{type:"hidden",name:e+"[facebox]",value:a.fbid}),g.createElement("input",{type:"hidden",name:e+"[source]",value:"photos_touch_composer"}))},this.$2=function(){var a=this.props.tokenCollection,b=this.props.tagSuggestions,c=[],d=0,e=0;a.map(function(a){var f=b[a.id];f&&(c=c.concat(Object.keys(f).map(function(b){var c,g;f[b].receivedInBackground?(c=j,g=e++):(c=i,g=d++);b=this.$1(f[b],a.id,a.name,g,c);return b}.bind(this))))}.bind(this));return c}.bind(this),this.$3=function(a,b){b=k+"["+b+"]";return g.createElement("div",{key:"failed"+a.fbid},g.createElement("input",{type:"hidden",name:b+"[fbid]",value:a.fbid}),g.createElement("input",{type:"hidden",name:b+"[tagee]",value:a.recognitions[0].user.fbid}))},b}a.prototype.render=function(){"use strict";return g.createElement("div",null,this.$2(),this.props.failedSuggestions.map(this.$3))};e.exports=a}),null);
__d("XPhotosGetRecognitionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/photos/tagging/recognition/",{photos:{type:"FBIDVector"},recognition_project:{type:"String",defaultValue:"default"},include_unrecognized_faceboxes:{type:"Bool",defaultValue:!1},is_page:{type:"Bool",defaultValue:!1},target:{type:"Int"},include_face_crop_src:{type:"Bool",defaultValue:!1},include_recognized_user_profile_picture:{type:"Bool",defaultValue:!1},include_low_confidence_recognitions:{type:"Bool",defaultValue:!1},face_crop_width:{type:"Int",defaultValue:32},face_crop_height:{type:"Int",defaultValue:32}})}),null);
__d("MTagSuggestionsPoller",["MRequest","PhotosUploadWaterfallXMixin","PUWSteps","XPhotosGetRecognitionController","mixin","performanceNow"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m,n=4,o=2e3,p=8e3;b=babelHelpers.inherits(a,k(h));m=b&&b.prototype;function a(){"use strict";m.constructor.call(this),this.$MTagSuggestionsPoller1=o,this.$MTagSuggestionsPoller2=0,this.$MTagSuggestionsPoller3={},this.$MTagSuggestionsPoller4=!1,this.$MTagSuggestionsPoller5=null}a.prototype.setRecognitionProject=function(a){"use strict";this.$MTagSuggestionsPoller6=a;return this};a.prototype.setIncludeUnrecognized=function(a){"use strict";this.$MTagSuggestionsPoller7=a;return this};a.prototype.setTargetIsPage=function(a){"use strict";this.$MTagSuggestionsPoller8=a;return this};a.prototype.setTargetId=function(a){"use strict";this.$MTagSuggestionsPoller9=a;return this};a.prototype.setHandler=function(a){"use strict";this.$MTagSuggestionsPoller10=a;return this};a.prototype.setTimeoutHandler=function(a){"use strict";this.$MTagSuggestionsPoller11=a;return this};a.prototype.isPolling=function(){"use strict";return this.$MTagSuggestionsPoller4};a.prototype.setWaterfall=function(a,b,c){"use strict";this.$MTagSuggestionsPoller12=a;this.$MTagSuggestionsPoller13=b;this.$MTagSuggestionsPoller14=c;return this};a.prototype.addPhotoIDAndLog=function(a,b){"use strict";this.$MTagSuggestionsPoller3[a]=b,this.logStep(i.CLIENT_FACEREC_BEGIN,{fbid:a}),this.invalidateTimeout(),this.startMasterTimerIfNeeded()};a.prototype.removePhotoID=function(a){"use strict";delete this.$MTagSuggestionsPoller3[a]};a.prototype.hasPhotoID=function(a){"use strict";return Object.prototype.hasOwnProperty.call(this.$MTagSuggestionsPoller3,a)};a.prototype.$MTagSuggestionsPoller15=function(a){"use strict";return this.$MTagSuggestionsPoller3[a]};a.prototype.startMasterTimerIfNeeded=function(){"use strict";this.$MTagSuggestionsPoller5||(this.$MTagSuggestionsPoller16=l(),this.$MTagSuggestionsPoller5=setTimeout(this.$MTagSuggestionsPoller17.bind(this),p))};a.prototype.invalidateTimeout=function(){"use strict";this.$MTagSuggestionsPoller2=0,this.$MTagSuggestionsPoller5&&(clearTimeout(this.$MTagSuggestionsPoller5),this.$MTagSuggestionsPoller5=null)};a.prototype.start=function(){"use strict";__p&&__p();var a=this.$MTagSuggestionsPoller18();if(a.length>0){this.$MTagSuggestionsPoller4=!0;this.$MTagSuggestionsPoller2++;this.startMasterTimerIfNeeded();a=new g(this.$MTagSuggestionsPoller19(a));this.$MTagSuggestionsPoller20=a;a.listen("done",function(a){this.$MTagSuggestionsPoller21(a)}.bind(this));a.listen("error",function(a){this.$MTagSuggestionsPoller22(a)}.bind(this));a.setTimeout(p);a.send()}};a.prototype.$MTagSuggestionsPoller17=function(){"use strict";this.$MTagSuggestionsPoller11&&this.$MTagSuggestionsPoller11(this.$MTagSuggestionsPoller23()),this.abort()};a.prototype.abort=function(){"use strict";this.$MTagSuggestionsPoller4=!1;for(var a in this.$MTagSuggestionsPoller3)this.logStep(i.CLIENT_FACEREC_FAIL,{attempt_number:this.$MTagSuggestionsPoller2,elapsed_time:l()-this.$MTagSuggestionsPoller16,fbid:a});this.$MTagSuggestionsPoller3={};this.invalidateTimeout();this.$MTagSuggestionsPoller20&&(this.$MTagSuggestionsPoller20&&this.$MTagSuggestionsPoller20.abort(),this.$MTagSuggestionsPoller20=null)};a.prototype.$MTagSuggestionsPoller21=function(a){"use strict";if(a.payload){a=a.payload.filter(function(a){var b=a.fbid,c=this.hasPhotoID(b);c&&(a.attachmentID=this.$MTagSuggestionsPoller15(b),this.removePhotoID(b),this.logStep(i.CLIENT_FACEREC_SUCCESS,{attempt_number:this.$MTagSuggestionsPoller2,elapsed_time:l()-this.$MTagSuggestionsPoller16,xy_tag_count:a.faceboxes.length,fbid:b}));return c}.bind(this));a.length>0&&this.$MTagSuggestionsPoller10(a)}this.restart()};a.prototype.$MTagSuggestionsPoller22=function(a){"use strict";this.restart()};a.prototype.restart=function(){"use strict";this.$MTagSuggestionsPoller2<n?setTimeout(this.start.bind(this),this.$MTagSuggestionsPoller1):this.$MTagSuggestionsPoller17()};a.prototype.$MTagSuggestionsPoller18=function(){"use strict";var a=[];for(var b in this.$MTagSuggestionsPoller3)a.push(b);return a};a.prototype.$MTagSuggestionsPoller23=function(){"use strict";var a=[];for(var b in this.$MTagSuggestionsPoller3)a.push(this.$MTagSuggestionsPoller3[b]);return a};a.prototype.$MTagSuggestionsPoller19=function(a){"use strict";a=j.getURIBuilder().setFBIDVector("photos",a).setString("recognition_project",this.$MTagSuggestionsPoller6).setBool("include_unrecognized_faceboxes",this.$MTagSuggestionsPoller7).setBool("is_page",this.$MTagSuggestionsPoller8).setInt("target",this.$MTagSuggestionsPoller9).getURI();return a};a.prototype.getWaterfallID=function(){"use strict";return this.$MTagSuggestionsPoller12};a.prototype.getWaterfallAppName=function(){"use strict";return this.$MTagSuggestionsPoller13};a.prototype.getWaterfallSource=function(){"use strict";return this.$MTagSuggestionsPoller14};e.exports=a}),null);
__d("MTagSuggestionsController",["BanzaiODS","DOM","MMultiPhotoUploaderAttachmentState","MStructuredComposerTaggingInputReact","MTagSuggestionsPoller","React","ReactDOM"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n="mtouch_composer_facerec_suggestions";function o(a,b,c,d,e,f){"use strict";this.$1=a,this.$1.setOnShow(this.onTokenizerInit.bind(this)),this.$1.setOnClear(this.reset.bind(this)),this.$2=b.getUploader(),this.$3=e,this.$3.setOnEntriesChangedHandler(this.$4.bind(this)),this.$5=0,this.$2.setProps({startPollingTagSuggestionsCallback:this.startPollingTagSuggestions.bind(this),onRemove:this.removeFaceboxesByPhotoID.bind(this)}),this.$6=new k().setRecognitionProject("composer_facerec").setIncludeUnrecognized(!0).setTargetIsPage(c==="page").setTargetId(d).setHandler(function(a){this.handleFaceboxResponse(a)}.bind(this)).setTimeoutHandler(function(a){this.onPollerTimeout(a)}.bind(this)).setWaterfall(this.$2.component.getWaterfallID(),this.$2.component.getWaterfallAppName(),this.$2.component.getWaterfallSource()),this.$7={},this.$8={},this.$9={},this.$10=!1,this.$11={},this.$12=!!f,this.$13=!1}o.prototype.onTokenizerInit=function(){"use strict";Object.keys(this.$9).length>0&&this.updateTypeaheadWithFaceboxSuggestions(),this.$10||(this.$10=!0,this.$1.getTokenizer().setProps({onAdd:this.$14.bind(this),onRemove:this.$15.bind(this)}))};o.prototype.$14=function(a){"use strict";this.$11[a.id]=!0};o.prototype.$15=function(a){"use strict";delete this.$11[a.id],a.autoTag&&g.bumpEntityKey(n,"remove_auto_tag")};o.prototype.$16=function(a){"use strict";__p&&__p();var b={};a.forEach(function(a){b[a.id]=!0});for(var c in this.$7)for(var d in this.$7[c]){a=this.$7[c][d];if(!a.tagUserID){if(!a.ignoreRecognition){var e=a.recognitions[0].user.fbid,f=a.recognitions[0].user.name;b[e]&&(a.tagUserID=e,a.tagName=f)}}else b[a.tagUserID]||(this.$8[a.tagUserID]&&a.ignoreRecognition&&delete this.$8[a.tagUserID][d],delete a.tagUserID,delete a.tagName)}};o.prototype.$4=function(a){"use strict";this.$16(a),this.$17(a)};o.prototype.$17=function(a){"use strict";__p&&__p();var b={};a.forEach(function(a){a=this.$8[a.id];for(var c in a){var d=a[c].attachmentID;b[d]||(b[d]=0);b[d]++}}.bind(this));this.$2.component.setAttachmentTagCounts(b)};o.prototype.startPollingTagSuggestions=function(a,b){"use strict";this.$6.addPhotoIDAndLog(a,b),this.$6.isPolling()||this.$6.start()};o.prototype.$18=function(a){"use strict";return{name:a.tagName,display:a.tagName,id:a.tagUserID,autoTag:!0,receivedInBackground:a.receivedInBackground}};o.prototype.handleFaceboxResponse=function(a){"use strict";__p&&__p();a.forEach(function(a){__p&&__p();var b=a.fbid,c=a.faceboxes;c.forEach(function(c){__p&&__p();c.photoID=b;c.attachmentID=a.attachmentID;this.$7[b]||(this.$7[b]={});this.$7[b][c.fbid]=c;if(c.recognitions.length>0){c.ignoreRecognition=!1;var d=c.recognitions[0].user.fbid;this.$8[d]||(this.$8[d]={});this.$13&&(c.receivedInBackground=!0);this.$8[d][c.fbid]=c;this.$9[d]||(this.$9[d]=0);this.$9[d]++;if(!this.$10&&this.$12){c.tagName=c.recognitions[0].user.name;c.tagUserID=d;d=this.$18(c);this.$3.addAutoToken(d)}}else c.ignoreRecognition=!0}.bind(this));this.$2.component.setAttachmentProps(a.attachmentID,{state:i.UPLOADED})}.bind(this));a=this.$3.getEntries();this.$16(a);this.$17(a)};o.prototype.removeFaceboxesByPhotoID=function(a){"use strict";__p&&__p();if(this.$6.hasPhotoID(a))this.$6.removePhotoID(a);else if(this.$7[a]){var b=this.$7[a];for(var c in b){var d=b[c];d.recognitions.length>0&&this.$19(d)}this.$7[a]=null}};o.prototype.$19=function(a){"use strict";__p&&__p();var b=a.tagUserID||a.recognitions[0].user.fbid;a.recognitions.length>0&&(this.$9[b]--,this.$9[b]===0&&delete this.$9[b]);if(this.$8[b]){delete this.$8[b][a.fbid];if(Object.keys(this.$8[b]).length<=0&&!this.$11[b]&&this.$12){b=this.$18(a);this.$3.onRemove(b)}else this.$17(this.$3.getEntries())}};o.prototype.updateTypeaheadWithFaceboxSuggestions=function(){"use strict";var a=Object.keys(this.$9);a=a.map(function(a){return+a});var b=this.$1.getTokenizer(),c=b.component.props.suggestions.map(function(a){return a.uid});c.forEach(function(b){a.indexOf(b)<0&&a.push(b)});b.updateTypeaheadWithSuggestions(a)};o.prototype.$20=function(){"use strict";var a=this.$1.getTokenizer();a.component.updateTypeaheadWithSuggestions([])};o.prototype.$21=function(){"use strict";var a=[];for(var b in this.$7)for(var c in this.$7[b]){var d=this.$7[b][c];d.recognitions.length>0&&d.ignoreRecognition&&d.tagUserID!==d.recognitions[0].user.fbid&&a.push(d)}return a};o.prototype.generateHiddenInput=function(a){"use strict";var b=h.create("div",{});h.appendContent(a,b);m.render(l.createElement(j,{tokenCollection:this.$3.getEntries(),tagSuggestions:this.$8,failedSuggestions:this.$21()}),b)};o.prototype.onPollerTimeout=function(a){"use strict";a.forEach(function(a){this.$2.component.setAttachmentProps(a,{state:i.UPLOADED})}.bind(this))};o.prototype.addXYTag=function(a){"use strict";var b=this.$7[a.photoID][a.fbid];b.recognitions.length>0&&this.$19(b);o.addFaceboxData(b,a.tagName,a.tagUserID);this.$8[b.tagUserID]||(this.$8[b.tagUserID]={});this.$8[b.tagUserID][b.fbid]=b;a=this.$18(b);this.$3.addManualXYTag(a);this.$5+=1};o.prototype.deleteXYTag=function(a){"use strict";var b=this.$7[a.photoID][a.fbid];b.ignoreRecognition=!0;delete b.tagUserID;delete b.tagName;this.$19(a);this.$5-=1};o.prototype.getNumXYTags=function(){"use strict";return this.$5};o.prototype.getFaceboxesCopyForPhoto=function(a){"use strict";var b={};for(var c in this.$7[a])b[c]=babelHelpers["extends"]({},this.$7[a][c]);return b};o.prototype.setBackgroundPolling=function(a){"use strict";this.$13=a};o.prototype.reset=function(){"use strict";this.$6.abort(),this.$9={},this.$7={},this.$8={},this.$20(),this.$10=!1,this.$11={},this.$5=0,this.$13=!1};o.addFaceboxData=function(a,b,c){"use strict";a.tagName=b,a.tagUserID=c,a.ignoreRecognition=!0};o.deleteFaceboxData=function(a){"use strict";delete a.tagUserID,delete a.tagName,a.ignoreRecognition=!0};e.exports=o}),null);
__d("MTokenizerParagraphRoot.react",["React","cx"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;b=g.PropTypes;i=babelHelpers.inherits(a,g.Component);i&&i.prototype;a.prototype.render=function(){"use strict";return g.createElement("div",{className:"_5hd3"},"\u2014",this.props.showSpace?" ":"",this.props.children)};function a(){"use strict";i.apply(this,arguments)}a.propTypes={showSpace:b.bool};a.defaultProps={showSpace:!0};e.exports=a}),null);
__d("MTokenizerParagraphToken.react",["MTouchableArea.react","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k;b=h.PropTypes;var l={use:{token:"mToken _4tk2",noborder:"mToken _4tk2 _3a7k"}};c=babelHelpers.inherits(a,h.Component);k=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.getClassListForAttribute=function(a){return l[a][this.props[a]]}.bind(this),b}a.prototype.render=function(){"use strict";return h.createElement(g,null,h.createElement("span",babelHelpers["extends"]({},this.props,{className:j(this.props.className,this.getClassListForAttribute("use"))}),h.createElement("span",{className:"_4tk0"},this.props.children)))};a.propTypes={use:b.oneOf(["token","noborder"])};a.defaultProps={use:"token"};e.exports=a}),null);
__d("MTokenizerParagraphAtPlace.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=i.PropTypes;d=babelHelpers.inherits(a,i.Component);k=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.renderNonSpecificPlace=function(){return i.createElement(g,null,j._("in {city-name}.",[j._param("city-name",this.renderPlaceToken())]))}.bind(this),this.renderPlaceToken=function(){return i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PLACE)},this.props.place.name)}.bind(this),this.renderSpecificPlace=function(){return i.createElement(g,null,j._("at {place-name}.",[j._param("place-name",this.renderPlaceToken())]))}.bind(this),b}a.prototype.render=function(){"use strict";return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace()};a.propTypes={onTokenClick:c.func.isRequired,place:c.object.isRequired};e.exports=a}),null);
__d("intlList",["React","fbt","invariant"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={AND:"AND",NONE:"NONE",OR:"OR"},k={COMMA:"COMMA",SEMICOLON:"SEMICOLON"};a=function(a,b,c){__p&&__p();b=b||j.AND;c=c||k.COMMA;var d=a.length;if(d===0)return"";else if(d===1)return a[0];var e=a[d-1],f=a[0];for(var g=1;g<d-1;++g)switch(c){case k.SEMICOLON:f=h._("{previous items}; {following items}",[h._param("previous items",f),h._param("following items",a[g])]);break;default:f=h._("{previous items}, {following items}",[h._param("previous items",f),h._param("following items",a[g])])}return l(f,e,b,c)};function l(a,b,c,d){switch(c){case j.AND:return h._("{list of items} and {last item}",[h._param("list of items",a),h._param("last item",b)]);case j.OR:return h._("{list of items} or {last item}",[h._param("list of items",a),h._param("last item",b)]);case j.NONE:switch(d){case k.SEMICOLON:return h._("{previous items}; {last item}",[h._param("previous items",a),h._param("last item",b)]);default:return h._("{list of items}, {last item}",[h._param("list of items",a),h._param("last item",b)])}default:i(0,568,c)}}a.DELIMITERS=k;a.CONJUNCTIONS=j;e.exports=a}),null);
__d("MTokenizerParagraphTokenList.react",["MTokenizerParagraphToken.react","React","fbt","intlList","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l;b=h.PropTypes;l=babelHelpers.inherits(a,h.Component);l&&l.prototype;a.prototype.render=function(){"use strict";var a=this.props.names.length;a=a===2?this.props.names[1]:i._("{count} others",[i._param("count",a-1)]);a=[h.createElement(g,null,this.props.names[0]),h.createElement(g,null,a)];return h.createElement("span",{onClick:this.props.onClick,role:"presentation"},j(a,j.CONJUNCTIONS.AND))};function a(){"use strict";l.apply(this,arguments)}a.propTypes={onClick:b.func,names:function(a,b,c){var d=Array.isArray(a[b]);d&&a[b].length>1||k(0,5066,b,d?"array":typeof a[b],a[b]?a[b].length:a[b],c)}};e.exports=a}),null);
__d("MTokenizerParagraphWithMultiplePeople.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphTokenList.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=i.PropTypes;k=babelHelpers.inherits(a,i.Component);k&&k.prototype;a.prototype.render=function(){"use strict";return i.createElement(g,null,j._("with {list-of-people}.",[j._param("list-of-people",i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PEOPLE),names:this.props.people.map(function(a){return a.name})}))]))};function a(){"use strict";k.apply(this,arguments)}a.propTypes={onTokenClick:c.func.isRequired,people:c.array.isRequired};e.exports=a}),null);
__d("MTokenizerParagraphWithMultiplePeopleAtPlace.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","MTokenizerParagraphTokenList.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=j.PropTypes;d=babelHelpers.inherits(a,j.Component);l=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=l.constructor).call.apply(a,[this].concat(d)),this.getPeopleNames=function(){return this.props.people.map(function(a){return a.name})}.bind(this),this.renderNonSpecificPlace=function(){return j.createElement(g,null,k._("with {list-of-people} in {non-specific-place-name}.",[k._param("list-of-people",this.renderPeopleToken()),k._param("non-specific-place-name",this.renderPlaceToken())]))}.bind(this),this.renderPeopleToken=function(){return j.createElement(i,{onClick:this.props.onTokenClick.bind(null,m.PEOPLE),names:this.getPeopleNames()})}.bind(this),this.renderPlaceToken=function(){return j.createElement(h,{onClick:this.props.onTokenClick.bind(null,m.PLACE)},this.props.place.name)}.bind(this),this.renderSpecificPlace=function(){return j.createElement(g,null,k._("with {list-of-people} at {place-name}.",[k._param("list-of-people",this.renderPeopleToken()),k._param("place-name",this.renderPlaceToken())]))}.bind(this),b}a.prototype.render=function(){"use strict";return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace()};a.propTypes={onTokenClick:c.func.isRequired,place:c.object.isRequired,people:c.array.isRequired};e.exports=a}),null);
__d("MTokenizerParagraphIcon.react",["Image.react","MTokenizerParagraphToken.react","React","cx"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k;b=i.PropTypes;k=babelHelpers.inherits(a,i.Component);k&&k.prototype;a.prototype.render=function(){"use strict";return i.createElement(h,this.props,i.createElement(g,{className:"_2r5v",src:this.props.src}))};function a(){"use strict";k.apply(this,arguments)}a.propTypes={use:b.oneOf(["token","noborder"])};a.defaultProps={use:"noborder"};e.exports=a}),null);
__d("MTokenizerParagraphWithOGActivity.react",["MTaggableActivityPreviewTemplateQuery","MTokenizerParagraphIcon.react","MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","MTokenizerParagraphTokenList.react","React","cx","ix","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o,p=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=l.PropTypes;d=babelHelpers.inherits(a,l.Component);o=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=o.constructor).call.apply(a,[this].concat(d)),this.state={template:null},this.getTemplateQuery=function(a){var b=new g(a.ogactivity.id);a.people.length===1?b.setHasPerson():a.people.length>1&&b.setHasPeople();a.place&&b.setHasPlace();return b},this.shouldRenderLoader=function(){return!(this.state.template&&this.props.ogactivity.icon)}.bind(this),this.renderLoading=function(){return l.createElement(h,{className:"_12zh",src:n("85428")})},this.renderTemplate=function(a){return this.state.template.renderArray(this.state.template.getTokens().map(this.renderToken))}.bind(this),this.renderToken=function(a){a=a.token;var b=this.props.onTokenClick.bind(null,a===p.PERSON?p.PEOPLE:a);switch(a){case p.ICON:return[l.createElement(h,{onClick:b,src:this.props.ogactivity.icon,use:"token"})," "];case p.OBJECT:return l.createElement(j,{onClick:b,key:a},this.props.ogactivity.object);case p.PEOPLE:return l.createElement(k,{onClick:b,names:this.props.people.map(function(a){return a.name}),key:a});case p.PERSON:return l.createElement(j,{onClick:b,key:a},this.props.people[0].name);case p.PLACE:return l.createElement(j,{onClick:b,key:a},this.props.place.name)}}.bind(this),b}a.prototype.componentDidMount=function(){"use strict";this.$1=!0,this.startTemplateQuery(this.props)};a.prototype.componentWillUnnount=function(){"use strict";this.$1=!1};a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";this.setState({template:null}),this.startTemplateQuery(a)};a.prototype.startTemplateQuery=function(a){"use strict";this.getTemplateQuery(a).fetch().done(function(a){this.$1&&this.setState({template:a})}.bind(this))};a.prototype.render=function(){"use strict";var a=this.shouldRenderLoader()?this.renderLoading():this.renderTemplate();return l.createElement(i,null,a)};a.propTypes={ogactivity:c.object.isRequired,onTokenClick:c.func.isRequired,people:c.array,place:c.object};e.exports=a}),null);
__d("MTokenizerParagraphWithPerson.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=i.PropTypes;k=babelHelpers.inherits(a,i.Component);k&&k.prototype;a.prototype.render=function(){"use strict";return i.createElement(g,null,j._("with {name1}.",[j._param("name1",i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PEOPLE)},this.props.person.name))]))};function a(){"use strict";k.apply(this,arguments)}a.propTypes={onTokenClick:c.func.isRequired,person:c.object.isRequired};e.exports=a}),null);
__d("MTokenizerParagraphWithPersonAtPlace.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=i.PropTypes;d=babelHelpers.inherits(a,i.Component);k=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.renderNonSpecificPlace=function(){return i.createElement(g,null,j._("with {name1} in {city-name}.",[j._param("name1",this.renderPersonToken()),j._param("city-name",this.renderPlaceToken())]))}.bind(this),this.renderPersonToken=function(){return i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PEOPLE)},this.props.person.name)}.bind(this),this.renderPlaceToken=function(){return i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PLACE)},this.props.place.name)}.bind(this),this.renderSpecificPlace=function(){return i.createElement(g,null,j._("with {name1} at {place-name}.",[j._param("name1",this.renderPersonToken()),j._param("place-name",this.renderPlaceToken())]))}.bind(this),b}a.prototype.render=function(){"use strict";return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace()};a.propTypes={onTokenClick:c.func.isRequired,place:c.object.isRequired,person:c.object.isRequired};e.exports=a}),null);
__d("MTokenizerParagraph.react",["MTokenizerParagraphAtPlace.react","MTokenizerParagraphWithMultiplePeople.react","MTokenizerParagraphWithMultiplePeopleAtPlace.react","MTokenizerParagraphWithOGActivity.react","MTokenizerParagraphWithPerson.react","MTokenizerParagraphWithPersonAtPlace.react","React"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n;b=m.PropTypes;c=babelHelpers.inherits(a,m.Component);n=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=n.constructor).call.apply(a,[this].concat(d)),this.renderTokens=function(){__p&&__p();var a=this.props.ogactivity,b=this.props.people||[],c=this.props.place;if(a)return m.createElement(j,babelHelpers["extends"]({},this.props,{ogactivity:a,people:b,place:c}));if(b.length>1&&c)return m.createElement(i,babelHelpers["extends"]({},this.props,{place:c,people:b}));if(b.length===1&&c)return m.createElement(l,babelHelpers["extends"]({},this.props,{place:c,person:b[0]}));if(c)return m.createElement(g,babelHelpers["extends"]({},this.props,{place:c}));if(b.length>1)return m.createElement(h,babelHelpers["extends"]({},this.props,{people:b}));return b.length===1?m.createElement(k,babelHelpers["extends"]({},this.props,{person:b[0]})):m.createElement("div",this.props)}.bind(this),b}a.prototype.render=function(){"use strict";return this.renderTokens()};a.propTypes={ogactivity:b.object,onTokenClick:b.func,people:b.array,place:b.object};a.defaultProps={ogactivity:null,people:[],place:null};e.exports=a}),null);
__d("MStructuredComposerUnifiedTagger",["MCompositionPlaceFields","MCompositionPlaceStore","MSubscriptionsHandlerMixin","MTokenizerParagraph.react","React","ReactDOM","Stratcom","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o;b=babelHelpers.inherits(a,n(i));o=b&&b.prototype;function a(a){"use strict";o.constructor.call(this),this.$MStructuredComposerUnifiedTagger1={ogActivity:null,people:null,place:null},this.$MStructuredComposerUnifiedTagger2=a,this.addSubscriptions(h.addListener("change",function(){h.isEmpty()?this.setAttachments({place:null}):this.setAttachments({place:{name:h.get(g.NAME),isNonSpecific:h.get(g.IS_NON_SPECIFIC,!1)}})}.bind(this)),m.listen("MComposer:tagger:update",null,function(event){return this.setAttachments(event.getData())}.bind(this)),m.listen("MComposer:tagger:update:og-icon",null,function(event){return this.setOGIcon(event.getData().icon)}.bind(this)),m.listen("MComposer:tagger:clear",null,function(){return this.clear()}.bind(this))),this.$MStructuredComposerUnifiedTagger3()}a.prototype.clear=function(){"use strict";this.$MStructuredComposerUnifiedTagger1.ogActivity=null;this.$MStructuredComposerUnifiedTagger1.people=null;this.$MStructuredComposerUnifiedTagger1.place=null;return this.$MStructuredComposerUnifiedTagger3()};a.prototype.$MStructuredComposerUnifiedTagger4=function(a){"use strict";m.invoke("MComposer:tagger:click",a)};a.prototype.$MStructuredComposerUnifiedTagger5=function(){"use strict";return!!(this.$MStructuredComposerUnifiedTagger1.ogActivity||this.$MStructuredComposerUnifiedTagger1.people&&this.$MStructuredComposerUnifiedTagger1.people.length||this.$MStructuredComposerUnifiedTagger1.place)};a.prototype.$MStructuredComposerUnifiedTagger3=function(){"use strict";this.$MStructuredComposerUnifiedTagger5()?l.render(k.createElement(j,{ogactivity:this.$MStructuredComposerUnifiedTagger1.ogActivity,onTokenClick:function(a){return this.$MStructuredComposerUnifiedTagger4(a)}.bind(this),people:this.$MStructuredComposerUnifiedTagger1.people,place:this.$MStructuredComposerUnifiedTagger1.place}),this.$MStructuredComposerUnifiedTagger2):l.unmountComponentAtNode(this.$MStructuredComposerUnifiedTagger2);return this};a.prototype.setAttachments=function(a){"use strict";Object.assign(this.$MStructuredComposerUnifiedTagger1,a);return this.$MStructuredComposerUnifiedTagger3()};a.prototype.setOGIcon=function(a){"use strict";this.$MStructuredComposerUnifiedTagger1.ogActivity&&(this.$MStructuredComposerUnifiedTagger1.ogActivity.icon=a);return this.$MStructuredComposerUnifiedTagger3()};e.exports=a}),null);
__d("XMStoriesAsyncTrayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/tray/",{})}),null);
__d("MStoriesTrayUtils",["MPageCache","MPageControllerPath","MRequestTypes","MResponseData","MURI","XAsyncRequest","XMStoriesAsyncTrayController"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();a={refreshTray:function(a,b){__p&&__p();var c=m.getURIBuilder().getURI();c=new l(new k(c).toString());c.setType(i.DEPENDENT);c.setAutoProcess(!1);c.setResponseHandler(function(b){b=new j(b);b.process();var c=h.getRequestPath();g.addCachedIUIResponse(c,b);a&&a()});c.setErrorHandler(function(){b&&b()});c.send()}};e.exports=a}),null);
__d("MStoriesProductionTrayAsync",["Bootloader","CSS","MFBStoriesGatingConfig","MFBStoriesTrayType","MStoriesID","MStoriesProductionInfo","MStoriesProductionTrayUtils","MStoriesStratcomEvents","MStoriesToast","MStoriesTrayUtils","MStoriesUIConstants","MStoriesUploadStatus","Stratcom","cx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";__p&&__p();a={handleFailedAddToStoryPogSelected:function(){__p&&__p();if(l.getUploadStatus()!==r.FAILED)return!1;var a=document.getElementById(k.PRODUCTION_INPUT);if(a){a.click();l.setUploadStatus(r.IDLE);m.updateProductionPog();return!0}return!1},uploadCB:function(a){__p&&__p();var b=m.getAnimationPog();if(a)l.setUploadStatus(r.IDLE),i.trayType!==j.CIRCULAR||b&&b.id===k.PRODUCTION_ADD_ITEM_POG?p.refreshTray(function(){this._cleanupUploading(),o.showDefaultToast(q.UPLOAD_SUCCESSFUL)}.bind(this),function(){this._cleanupUploading()}.bind(this)):(this._cleanupUploading(),o.showDefaultToast(q.UPLOAD_SUCCESSFUL)),b&&h.addClass(b,"_26w9"),s.invoke(n.UPLOAD_SUCCESS,null,null);else{l.setUploadStatus(r.FAILED);if(b&&b.id===k.PRODUCTION_ADD_ITEM_POG){var c=document.getElementById(k.PRODUCTION_ADD_ITEM_DIV);c&&h.addClass(c,"no-after");b&&h.removeClass(b,"hide-border")}this._cleanupUploading();s.invoke(n.UPLOAD_FAILED,null,null)}g.loadModules(["FBStoriesLoggingConstants","MStoriesTypedLogger"],function(b,c){b=a?b.ACTION_SEND_STORY_SUCCEEDED:b.ACTION_SEND_STORY_FAILED;c=new c().setName(b);c.log()},"MStoriesProductionTrayAsync")},_cleanupUploading:function(){var a=document.getElementById(k.PRODUCTION_ADD_ITEM_POG),b=document.getElementById(k.PRODUCTION_OWNER_ITEM_POG);a&&h.removeClass(a,m.getUploadingClass());b&&h.removeClass(b,m.getUploadingClass());a=document.getElementById(k.PRODUCTION_ADD_ITEM_DIV);a&&h.removeClass(a,"disable");m.updateProductionPog()}};e.exports=a}),null);
__d("PerfHelperUtils",["React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,g.PureComponent);h&&h.prototype;a.prototype.render=function(){return this.props.children};function a(){h.apply(this,arguments)}b={SlowBootloadBorder:a};e.exports=b}),null);
__d("MImageFetchNotifier",["invariant","prefetchImage","setImmediateAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={},k={},l={},m={};function n(a,b){if(!j[a])return;b=j[a].indexOf(b);j[a].splice(b,1);j[a].length===0&&(l[a].cancel(),delete j[a],delete l[a])}function o(a){k[a]=!0,j[a].forEach(function(a){return a()}),delete j[a],delete l[a]}function p(a){l[a]=h(a,function(){o(a)})}var q={associateImageURLWithDOMID:function(a,b){m[a]=b},notifyWhenFetched:function(a,b){__p&&__p();if(k[a]===!0){var c=!0;i(function(){c&&b()});return{remove:function(){c=!1}}}j[a]=j[a]||[];j[a].push(b);l[a]||p(a);return{remove:function(){n(a,b)}}},notifyWhenFetchedForDOMID:function(a,b){var c=m[a];c!==null||g(0,1595,a);return q.notifyWhenFetched(c,b)}};e.exports=q}),null);
__d("DeferredComponent.react",["React","createCancelableFunction","gkx"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;b=g.PropTypes;c=babelHelpers.inherits(a,g.Component);j=c&&c.prototype;function a(a,b){"use strict";__p&&__p();j.constructor.call(this,a,b);this.$1=function(a){this.setState({ComponentClass:a},function(){this.props.onComponentLoad&&this.props.onComponentLoad(a)}.bind(this))}.bind(this);var c=null;function d(a){c=a}this.props.deferredComponent(d);this.state={ComponentClass:c,cancelableModulesLoaded:h(this.$1)}}a.prototype.componentDidMount=function(){"use strict";this.props.deferredComponent(this.state.cancelableModulesLoaded)};a.prototype.componentWillUnmount=function(){"use strict";this.state.cancelableModulesLoaded.cancel()};a.prototype.render=function(){"use strict";__p&&__p();var a=this.state.ComponentClass;if(!a||this.props.deferredForcePlaceholder)return this.props.deferredPlaceholder;var b=this.props;b.deferredPlaceholder;b.deferredComponent;b.onComponentLoad;b.deferredForcePlaceholder;b=babelHelpers.objectWithoutProperties(b,["deferredPlaceholder","deferredComponent","onComponentLoad","deferredForcePlaceholder"]);return g.createElement(a,b)};a.propTypes={deferredPlaceholder:b.element.isRequired,deferredComponent:b.func.isRequired,onComponentLoad:b.func,deferredForcePlaceholder:b.bool};e.exports=a}),null);
__d("JSResourceReference",["Promise","Bootloader","ifRequired"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=function(a){return a};function a(a){"use strict";this.$1=a}a.prototype.getModuleId=function(){"use strict";var a=this.$1;return a};a.prototype.getModuleIdAsRef=function(){"use strict";return this.$1};a.prototype.load=function(){"use strict";return new g(function(a){h.loadModules.call(h,[this.$1],a,this.$2||"JSResource: unknown caller")}.bind(this))};a.prototype.preload=function(){"use strict";h.preloadModules.call(h,[this.$1])};a.prototype.equals=function(a){"use strict";return this===a||this.$1==a.$1};a.prototype.getModuleIfRequired=function(){"use strict";return i.call(null,this.$1,j)};a.prototype.__setRef=function(a){"use strict";this.$2=a;return this};a.loadAll=function(a,b){"use strict";__p&&__p();var c={},d=!1;for(var e=a,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;i=i.$2;i&&(d=!0,c[i]=!0)}h.loadModules.call(h,a.map(function(a){return a.getModuleId()}),b,d?Object.keys(c).join(":"):"JSResource: unknown caller")};e.exports=a}),null);
__d("JSResource",["JSResourceReference"],(function(a,b,c,d,e,f,g){function a(a){return new g(a)}a.Reference=g;a.loadAll=g.loadAll;e.exports=a}),null);
__d("PerfUtils",["React","performanceNow","PerfHelperUtils"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=g.Component,k=i.SlowBootloadBorder;function a(a,b,c){__p&&__p();var d;d=babelHelpers.inherits(e,j);d&&d.prototype;e.prototype.componentDidMount=function(){"use strict";b()};e.prototype.render=function(){"use strict";if(c)return g.createElement(a,babelHelpers["extends"]({},this.props,{ref:c}));else return g.createElement(a,this.props)};function e(){"use strict";d.apply(this,arguments)}return e}function b(a,b,c){__p&&__p();var d,e=1e4;c=h()-c;if(c<e)return a;var f=e/1e3,i=Math.round(c)/1e3;d=babelHelpers.inherits(l,j);d&&d.prototype;l.prototype.componentDidMount=function(){"use strict"};l.prototype.render=function(){"use strict";return g.createElement(k,{moduleId:b,timeLimitSecs:f,timeSpentSecs:i},g.createElement(a,this.props))};function l(){"use strict";d.apply(this,arguments)}return l}c={appendListener:a,markRedInDev:b};e.exports=c}),null);
__d("Placeholder.react",["react"],(function(a,b,c,d,e,f,g){var h=g.Suspense;function a(a){var b=a.fallback;return g.createElement(h,babelHelpers["extends"]({},a,{fallback:b===void 0?null:b}))}e.exports=a}),null);
__d("BootloaderResource",[],(function(a,b,c,d,e,f){a={preload:function(a){a.load()},read:function(b){var a=b.getModuleIfRequired();if(!a)throw b.load();return a}};e.exports=a}),null);
__d("lazyLoadComponent",["BootloaderResource","react"],(function(a,b,c,d,e,f,g,h){function a(a){function b(b){var c=g.read(a);return h.createElement(c,b)}b.displayName="lazyLoadComponent("+a.getModuleId()+")";return b}e.exports=a}),null);
__d("BootloadedComponent.react",["DeferredComponent.react","JSResource","PerfUtils","Placeholder.react","React","TimeSlice","gkx","invariant","lazyLoadComponent","performanceNow"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q,r,s;d=k.Component;var t=i.appendListener;f=i.markRedInDev;p=m("676835");q=babelHelpers.inherits(a,d);q&&q.prototype;a.create=function(a){__p&&__p();var b;b=babelHelpers.inherits(c,k.Component);b&&b.prototype;c.prototype.render=function(){var b=this.props;b.bootloadLoader;b=babelHelpers.objectWithoutProperties(b,["bootloadLoader"]);return k.createElement(u,babelHelpers["extends"]({bootloadLoader:a,bootloadPlaceholder:k.createElement("div",null)},b))};function c(){b.apply(this,arguments)}c.displayName="BootloadedComponent("+a.getModuleId()+")";return c};function a(){"use strict";q.apply(this,arguments)}i=babelHelpers.inherits(b,a);r=i&&i.prototype;function b(a){"use strict";r.constructor.call(this,a);this.$SuspenseBootloadedComponent1=null;a.onBootloaderWillMount&&a.onBootloaderWillMount();var b=a.isContinuation?l.PropagationType.CONTINUATION:l.PropagationType.EXECUTION;b=l.guard(o,"Use lazyLoadComponent to load the module",{propagationType:b});b=b(a.bootloadLoader);this.$SuspenseBootloadedComponent1=a.onComponentDidMount?t(b,a.onComponentDidMount):b}b.prototype.render=function(){"use strict";__p&&__p();var a=this.props,b=a.bootloadLoader,c=a.bootloadPlaceholder,d=a.bootloadForcePlaceholder;a.isContinuation;a.onComponentDidMount;a=babelHelpers.objectWithoutProperties(a,["bootloadLoader","bootloadPlaceholder","bootloadForcePlaceholder","isContinuation","onComponentDidMount"]);var e=this.$SuspenseBootloadedComponent1;if(d===!0)return c;e!=null||n(0,5832,b.getModuleId());return k.createElement(j,{fallback:c},k.createElement(e,a))};f=babelHelpers.inherits(c,a);s=f&&f.prototype;function c(a){"use strict";s.constructor.call(this,a),this.$BootloadedComponent1=function(a){var b=this.props.isContinuation,c;b=b?l.PropagationType.CONTINUATION:l.PropagationType.EXECUTION;l.guard(h.loadAll,"BootloadedComponent load all JSResource",{propagationType:b})([this.props.bootloadLoader],function(b){b=this.props.onComponentDidMount?t(b,this.props.onComponentDidMount):b,a(b)}.bind(this))}.bind(this),a.onBootloaderWillMount&&a.onBootloaderWillMount()}c.prototype.render=function(){"use strict";var a=this.props;a.bootloadLoader;a.isContinuation;var b=a.bootloadPlaceholder,c=a.bootloadForcePlaceholder;a=babelHelpers.objectWithoutProperties(a,["bootloadLoader","isContinuation","bootloadPlaceholder","bootloadForcePlaceholder"]);return k.createElement(g,babelHelpers["extends"]({deferredPlaceholder:b,deferredComponent:this.$BootloadedComponent1,deferredForcePlaceholder:c},a))};c.defaultProps={isContinuation:!0};var u=p?b:c;e.exports=u}),null);